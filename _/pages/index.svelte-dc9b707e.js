import{S as e,i as t,s as a,R as n,e as l,c as s,a as o,d as r,b as c,f as i,T as u,U as h,V as d,t as f,k as g,g as v,n as m,W as p,H as y,I as w,h as $,l as x,X as T,j as b,m as E,Y as k,o as L,Z as N,x as S,u as P,v as A,L as K,_ as j,w as q,A as I,$ as O,a0 as M,r as U,a1 as _}from"../chunks/vendor-77db0df1.js";function C(e,t,a){const n=e.slice();return n[5]=t[a],n}function R(e){return{c:h,l:h,m:h,p:h,d:h}}function V(e){let t,a=e[4],n=[];for(let l=0;l<a.length;l+=1)n[l]=B(C(e,a,l));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=x()},l(e){for(let t=0;t<n.length;t+=1)n[t].l(e);t=x()},m(e,a){for(let t=0;t<n.length;t+=1)n[t].m(e,a);i(e,t,a)},p(e,l){if(7&l){let s;for(a=e[4],s=0;s<a.length;s+=1){const o=C(e,a,s);n[s]?n[s].p(o,l):(n[s]=B(o),n[s].c(),n[s].m(t.parentNode,t))}for(;s<n.length;s+=1)n[s].d(1);n.length=a.length}},d(e){T(n,e),e&&r(t)}}}function B(e){let t,a,n,u,h,d,x,T=e[5].name+"";function b(){return e[3](e[5])}return{c(){t=l("li"),a=l("button"),n=f(T),h=g(),this.h()},l(e){t=s(e,"LI",{});var l=o(t);a=s(l,"BUTTON",{style:!0,class:!0});var c=o(a);n=v(c,T),c.forEach(r),h=m(l),l.forEach(r),this.h()},h(){c(a,"style",u=`--color: rgb(${128*Math.random()+128}, ${128*Math.random()+128}, ${128*Math.random()+128})`),c(a,"class","svelte-16g0a1o"),p(a,"active",e[0]===e[5].code)},m(e,l){i(e,t,l),y(t,a),y(a,n),y(t,h),d||(x=w(a,"click",b),d=!0)},p(t,l){e=t,2&l&&T!==(T=e[5].name+"")&&$(n,T),3&l&&p(a,"active",e[0]===e[5].code)},d(e){e&&r(t),d=!1,x()}}}function D(e){let t,a,n;return{c(){t=l("p"),a=f("Loading languages... "),n=l("span"),this.h()},l(e){t=s(e,"P",{});var l=o(t);a=v(l,"Loading languages... "),n=s(l,"SPAN",{class:!0}),o(n).forEach(r),l.forEach(r),this.h()},h(){c(n,"class","bi-arrow-repeat spin svelte-16g0a1o")},m(e,l){i(e,t,l),y(t,a),y(t,n)},p:h,d(e){e&&r(t)}}}function X(e){let t,a,d={ctx:e,current:null,token:null,hasCatch:!1,pending:D,then:V,catch:R,value:4};return n(a=e[1],d),{c(){t=l("ul"),d.block.c(),this.h()},l(e){t=s(e,"UL",{class:!0});var a=o(t);d.block.l(a),a.forEach(r),this.h()},h(){c(t,"class","langs svelte-16g0a1o")},m(e,a){i(e,t,a),d.block.m(t,d.anchor=null),d.mount=()=>t,d.anchor=null},p(t,[l]){e=t,d.ctx=e,2&l&&a!==(a=e[1])&&n(a,d)||u(d,e,l)},i:h,o:h,d(e){e&&r(t),d.block.d(),d.token=null,d=null}}}function G(e,t,a){const n=d();let{languagePromise:l}=t,{selectedLang:s}=t;return e.$$set=e=>{"languagePromise"in e&&a(1,l=e.languagePromise),"selectedLang"in e&&a(0,s=e.selectedLang)},[s,l,n,e=>{a(0,s=e.code),n("change")}]}class H extends e{constructor(e){super(),t(this,e,G,X,a,{languagePromise:1,selectedLang:0})}}function J(e,t,a){const n=e.slice();return n[14]=t[a],n[15]=t,n[16]=a,n}function W(e,t){let a,n,u,h,d,f,v,p,$,x,T=t[16];function j(){t[7].call(n,t[16])}const q=()=>t[8](n,T),I=()=>t[8](null,T);function U(e){t[9](e,t[16])}let _={languagePromise:t[3]};return void 0!==t[1][t[16]].lang&&(_.selectedLang=t[1][t[16]].lang),d=new H({props:_}),O.push((()=>M(d,"selectedLang",U))),d.$on("change",(function(){return t[10](t[16])})),{key:e,first:null,c(){a=l("div"),n=l("textarea"),h=g(),b(d.$$.fragment),v=g(),this.h()},l(e){a=s(e,"DIV",{class:!0});var t=o(a);n=s(t,"TEXTAREA",{tabindex:!0,placeholder:!0,spellcheck:!0,class:!0}),o(n).forEach(r),h=m(t),E(d.$$.fragment,t),v=m(t),t.forEach(r),this.h()},h(){c(n,"tabindex",1),c(n,"placeholder",u=t[16]-+(1!==t[0])?`Type ${t[1][+(1===t[0])].langName} here`:`See ${t[1][+(1!==t[0])].langName} translation here`),c(n,"spellcheck",!1),c(n,"class","svelte-yoma1h"),c(a,"class","translation from svelte-yoma1h"),this.first=a},m(e,l){i(e,a,l),y(a,n),k(n,t[1][t[16]].value),q(),y(a,h),L(d,a,null),y(a,v),p=!0,$||(x=[w(n,"focus",t[6](t[16],!0)),w(n,"blur",t[6](t[16],!1)),w(n,"input",t[4](!t[16])),w(n,"input",j)],$=!0)},p(e,a){t=e,(!p||3&a&&u!==(u=t[16]-+(1!==t[0])?`Type ${t[1][+(1===t[0])].langName} here`:`See ${t[1][+(1!==t[0])].langName} translation here`))&&c(n,"placeholder",u),2&a&&k(n,t[1][t[16]].value),T!==t[16]&&(I(),T=t[16],q());const l={};!f&&2&a&&(f=!0,l.selectedLang=t[1][t[16]].lang,N((()=>f=!1))),d.$set(l)},i(e){p||(S(d.$$.fragment,e),p=!0)},o(e){P(d.$$.fragment,e),p=!1},d(e){e&&r(a),I(),A(d),$=!1,K(x)}}}function Y(e){let t,a,n,u,h,d,f,v,p=[],$=new Map,x=[...Array(2)];const T=e=>e[16];for(let l=0;l<x.length;l+=1){let t=J(e,x,l),a=T(t);$.set(a,p[l]=W(a,t))}return{c(){t=g(),a=l("div"),n=l("button"),u=g(),h=l("section");for(let e=0;e<p.length;e+=1)p[e].c();this.h()},l(e){t=m(e),a=s(e,"DIV",{class:!0});var l=o(a);n=s(l,"BUTTON",{class:!0}),o(n).forEach(r),l.forEach(r),u=m(e),h=s(e,"SECTION",{class:!0});var c=o(h);for(let t=0;t<p.length;t+=1)p[t].l(c);c.forEach(r),this.h()},h(){c(n,"class","bi-arrow-left-right switch-langs svelte-yoma1h"),c(a,"class","top-bar svelte-yoma1h"),c(h,"class","translations svelte-yoma1h")},m(l,s){i(l,t,s),i(l,a,s),y(a,n),i(l,u,s),i(l,h,s);for(let e=0;e<p.length;e+=1)p[e].m(h,null);d=!0,f||(v=w(n,"click",e[5]()),f=!0)},p(e,[t]){95&t&&(x=[...Array(2)],U(),p=j(p,t,T,1,e,x,$,h,_,W,null,J),q())},i(e){if(!d){for(let e=0;e<x.length;e+=1)S(p[e]);d=!0}},o(e){for(let t=0;t<p.length;t+=1)P(p[t]);d=!1},d(e){e&&r(t),e&&r(a),e&&r(u),e&&r(h);for(let t=0;t<p.length;t+=1)p[t].d();f=!1,v()}}}function Z(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}c((n=n.apply(e,t||[])).next())}))};let l=-1,s=[{lang:"de",langName:"German",value:"",textarea:void 0},{lang:"en",langName:"English",value:"",textarea:void 0}],o=0,r=0;const c=n(void 0,void 0,void 0,(function*(){return yield(yield window.fetch("https://translate.argosopentech.com/languages")).json()}));let i=[];const u=e=>t=>n(void 0,void 0,void 0,(function*(){var n;const l=((null==t?void 0:t.target)||s[+!e]).value.trim();if(!l)return void window.setTimeout((()=>a(1,s[+e].value="",s)));const c=o++,i=yield window.fetch("https://translate.argosopentech.com/translate",{method:"POST",body:JSON.stringify({q:l,source:s[+!e].lang,target:s[+e].lang,format:"text"}),headers:{"Content-Type":"application/json"}});i.ok?c>=r&&(a(1,s[+e].value=null===(n=yield i.json())||void 0===n?void 0:n.translatedText,s),r=c):console.error(`Reqest failed with status ${i.status} (${i.statusText})`)})),h=()=>e=>{var t,n;const o=l;a(1,s=s.reverse()),u(1!==o)(),null===(n=null===(t=document.querySelector("section.translations").children[(l+1||1)-1])||void 0===t?void 0:t.querySelector("textarea"))||void 0===n||n.focus(),window.setTimeout((()=>{a(0,l=o)}),250)};I((()=>n(void 0,void 0,void 0,(function*(){var e;window.addEventListener("keypress",(e=>{var t;"KeyS"===e.code&&e.ctrlKey&&e.shiftKey&&h()(),!e.ctrlKey&&!e.altKey&&!e.metaKey&&l<0&&(null===(t=s[0].textarea)||void 0===t||t.focus())})),window.addEventListener("focus",(e=>{window.setTimeout((()=>{var e;return null===(e=s[0].textarea)||void 0===e?void 0:e.focus()}),100)})),null===(e=s[0].textarea)||void 0===e||e.focus(),a(2,i=yield c)}))));return[l,s,i,c,u,h,(e,t)=>n=>{t?a(0,l=e):window.setTimeout((()=>{l===e&&a(0,l=-1)}),250)},function(e){s[e].value=this.value,a(1,s)},function(e,t){O[e?"unshift":"push"]((()=>{s[t].textarea=e,a(1,s)}))},function(t,n){e.$$.not_equal(s[n].lang,t)&&(s[n].lang=t,a(1,s))},e=>{u(1!==l)(),a(1,s[e].langName=i.filter((({code:t})=>t===s[e].lang))[0].name,s)}]}export default class extends e{constructor(e){super(),t(this,e,Z,Y,a,{})}}
//# sourceMappingURL=index.svelte-dc9b707e.js.map
