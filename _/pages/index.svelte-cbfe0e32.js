import{S as e,i as t,s as a,Q as n,e as s,c as l,a as o,d as c,b as r,f as i,R as u,T as h,t as f,k as g,g as d,n as v,U as p,H as m,I as $,h as b,l as j,V as x,W as w,X as E,j as T,m as k,Y as L,o as y,Z as N,x as z,u as S,v as q,L as A,A as I}from"../chunks/vendor-c28478b8.js";function O(e,t,a){const n=e.slice();return n[3]=t[a],n}function P(e){return{c:h,l:h,m:h,p:h,d:h}}function R(e){let t,a=e[1],n=[];for(let s=0;s<a.length;s+=1)n[s]=U(O(e,a,s));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=j()},l(e){for(let t=0;t<n.length;t+=1)n[t].l(e);t=j()},m(e,a){for(let t=0;t<n.length;t+=1)n[t].m(e,a);i(e,t,a)},p(e,s){if(3&s){let l;for(a=e[1],l=0;l<a.length;l+=1){const o=O(e,a,l);n[l]?n[l].p(o,s):(n[l]=U(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=a.length}},d(e){x(n,e),e&&c(t)}}}function U(e){let t,a,n,u,h,j,x=e[3].name+"";function w(){return e[2](e[3])}return{c(){t=s("li"),a=s("button"),n=f(x),u=g(),this.h()},l(e){t=l(e,"LI",{});var s=o(t);a=l(s,"BUTTON",{class:!0});var r=o(a);n=d(r,x),r.forEach(c),u=v(s),s.forEach(c),this.h()},h(){r(a,"class","svelte-13irh07"),p(a,"active",e[0]===e[3].code)},m(e,s){i(e,t,s),m(t,a),m(a,n),m(t,u),h||(j=$(a,"click",w),h=!0)},p(t,s){e=t,2&s&&x!==(x=e[3].name+"")&&b(n,x),3&s&&p(a,"active",e[0]===e[3].code)},d(e){e&&c(t),h=!1,j()}}}function V(e){let t,a,n;return{c(){t=s("p"),a=f("Loading languages... "),n=s("span"),this.h()},l(e){t=l(e,"P",{});var s=o(t);a=d(s,"Loading languages... "),n=l(s,"SPAN",{class:!0}),o(n).forEach(c),s.forEach(c),this.h()},h(){r(n,"class","bi-arrow-repeat spin svelte-13irh07")},m(e,s){i(e,t,s),m(t,a),m(t,n)},p:h,d(e){e&&c(t)}}}function _(e){let t,a,f={ctx:e,current:null,token:null,hasCatch:!1,pending:V,then:R,catch:P,value:1};return n(a=e[1],f),{c(){t=s("ul"),f.block.c(),this.h()},l(e){t=l(e,"UL",{class:!0});var a=o(t);f.block.l(a),a.forEach(c),this.h()},h(){r(t,"class","langs svelte-13irh07")},m(e,a){i(e,t,a),f.block.m(t,f.anchor=null),f.mount=()=>t,f.anchor=null},p(t,[s]){e=t,f.ctx=e,2&s&&a!==(a=e[1])&&n(a,f)||u(f,e,s)},i:h,o:h,d(e){e&&c(t),f.block.d(),f.token=null,f=null}}}function C(e,t,a){let{languages:n}=t,{selectedLang:s}=t;return e.$$set=e=>{"languages"in e&&a(1,n=e.languages),"selectedLang"in e&&a(0,s=e.selectedLang)},[s,n,e=>a(0,s=e.code)]}class D extends e{constructor(e){super(),t(this,e,C,_,a,{languages:1,selectedLang:0})}}function X(e){let t,a,n,u,h,f,d,p,b,j,x,I,O,P,R,U,V,_,C;function X(t){e[6](t)}let B={languages:e[1]};function H(t){e[8](t)}void 0!==e[0][0].lang&&(B.selectedLang=e[0][0].lang),b=new D({props:B}),w.push((()=>E(b,"selectedLang",X)));let J={languages:e[1]};return void 0!==e[0][1].lang&&(J.selectedLang=e[0][1].lang),R=new D({props:J}),w.push((()=>E(R,"selectedLang",H))),{c(){t=g(),a=s("div"),n=s("button"),u=g(),h=s("section"),f=s("div"),d=s("textarea"),p=g(),T(b.$$.fragment),x=g(),I=s("div"),O=s("textarea"),P=g(),T(R.$$.fragment),this.h()},l(e){t=v(e),a=l(e,"DIV",{class:!0});var s=o(a);n=l(s,"BUTTON",{class:!0}),o(n).forEach(c),s.forEach(c),u=v(e),h=l(e,"SECTION",{class:!0});var r=o(h);f=l(r,"DIV",{class:!0});var i=o(f);d=l(i,"TEXTAREA",{tabindex:!0,spellcheck:!0,class:!0}),o(d).forEach(c),p=v(i),k(b.$$.fragment,i),i.forEach(c),x=v(r),I=l(r,"DIV",{class:!0});var g=o(I);O=l(g,"TEXTAREA",{tabindex:!0,spellcheck:!0,class:!0}),o(O).forEach(c),P=v(g),k(R.$$.fragment,g),g.forEach(c),r.forEach(c),this.h()},h(){r(n,"class","bi-arrow-left-right switch-langs svelte-1fzljj7"),r(a,"class","top-bar svelte-1fzljj7"),r(d,"tabindex",1),r(d,"spellcheck",!1),r(d,"class","svelte-1fzljj7"),r(f,"class","translation from svelte-1fzljj7"),r(O,"tabindex",1),r(O,"spellcheck",!1),r(O,"class","svelte-1fzljj7"),r(I,"class","translation to svelte-1fzljj7"),r(h,"class","translations svelte-1fzljj7")},m(s,l){i(s,t,l),i(s,a,l),m(a,n),i(s,u,l),i(s,h,l),m(h,f),m(f,d),L(d,e[0][0].value),m(f,p),y(b,f,null),m(h,x),m(h,I),m(I,O),L(O,e[0][1].value),m(I,P),y(R,I,null),V=!0,_||(C=[$(n,"click",e[3]()),$(d,"focus",e[4](0,!0)),$(d,"blur",e[4](0,!1)),$(d,"input",e[2](!0)),$(d,"input",e[5]),$(O,"focus",e[4](1,!0)),$(O,"blur",e[4](1,!1)),$(O,"input",e[2](!1)),$(O,"input",e[7])],_=!0)},p(e,[t]){1&t&&L(d,e[0][0].value);const a={};2&t&&(a.languages=e[1]),!j&&1&t&&(j=!0,a.selectedLang=e[0][0].lang,N((()=>j=!1))),b.$set(a),1&t&&L(O,e[0][1].value);const n={};2&t&&(n.languages=e[1]),!U&&1&t&&(U=!0,n.selectedLang=e[0][1].lang,N((()=>U=!1))),R.$set(n)},i(e){V||(z(b.$$.fragment,e),z(R.$$.fragment,e),V=!0)},o(e){S(b.$$.fragment,e),S(R.$$.fragment,e),V=!1},d(e){e&&c(t),e&&c(a),e&&c(u),e&&c(h),q(b),q(R),_=!1,A(C)}}}const B="https://translate.argosopentech.com";function H(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,l){function o(e){try{r(n.next(e))}catch(t){l(t)}}function c(e){try{r(n.throw(e))}catch(t){l(t)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,c)}r((n=n.apply(e,t||[])).next())}))};let s=-1,l=[{lang:"de",value:"hallo"},{lang:"en",value:"hello"}],o=0,c=0,r=n(void 0,void 0,void 0,(function*(){return yield(yield window.fetch(`${B}/languages`)).json()}));return I((()=>n(void 0,void 0,void 0,(function*(){a(1,r=yield(yield window.fetch(`${B}/languages`)).json())})))),[l,r,e=>t=>n(void 0,void 0,void 0,(function*(){var n;const s=t.target.value.trim();if(!s)return void setTimeout((()=>a(0,l[Number(e)].value="",l)));const r=o++,i=yield window.fetch(`${B}/translate`,{method:"POST",body:JSON.stringify({q:s,source:l[Number(!e)].lang,target:l[Number(e)].lang,format:"text"}),headers:{"Content-Type":"application/json"}});i.ok?r>=c&&(a(0,l[Number(e)].value=null===(n=yield i.json())||void 0===n?void 0:n.translatedText,l),c=r):console.error(`Reqest failed with status ${i.status} (${i.statusText})`)})),()=>e=>{var t,n;a(0,l=l.reverse()),null===(n=null===(t=document.querySelector("section.translations").children[s])||void 0===t?void 0:t.querySelector("textarea"))||void 0===n||n.focus()},(e,t)=>a=>{t?s=e:window.setTimeout((()=>{s===e&&(s=-1)}),250),console.log({textarea:e,focus:t,focusedTextarea:s})},function(){l[0].value=this.value,a(0,l)},function(t){e.$$.not_equal(l[0].lang,t)&&(l[0].lang=t,a(0,l))},function(){l[1].value=this.value,a(0,l)},function(t){e.$$.not_equal(l[1].lang,t)&&(l[1].lang=t,a(0,l))}]}export default class extends e{constructor(e){super(),t(this,e,H,X,a,{})}}
//# sourceMappingURL=index.svelte-cbfe0e32.js.map
